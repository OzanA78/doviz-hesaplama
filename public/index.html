<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aylık Ödeme Tablosu</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <main class="container table-view">
        <div class="header-container">
            <div class="header-main">
                <h1>Aylık Ödeme Tablosu</h1>
                <div class="current-rate-info" id="currentRateInfo">Güncel Kur: Yükleniyor...</div>
                <div id="counter">0</div>
            </div>
            <p class="subtitle">Farklı tarihlerdeki miktarların güncel toplu değerini hesaplayın.</p>
        </div>
        
        <!-- Toolbar -->
        <div class="toolbar-container">
            <div class="toolbar-left">
                <div class="plan-controls">
                    <div class="plan-selector-container">
                        <input type="text" id="planSelector" class="plan-selector" placeholder="Plan seçin...">
                        <div class="plan-dropdown hidden" id="planDropdown">
                        </div>
                    </div>
                    <button id="savePlanBtn" class="toolbar-btn save-btn" title="Planı kaydet">💾 Kaydet</button>
                    <button id="deletePlanBtn" class="toolbar-btn delete-btn" title="Seçili planı sil">🗑️ Sil</button>
                </div>
            </div>
            <div class="toolbar-right">
                <div class="plan-actions">
                    <button id="clearCacheBtn" class="toolbar-btn clear-btn" title="Tüm verileri temizle">🧹 Temizle</button>
                </div>
            </div>
        </div>
        
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Yıl</th>
                        <th>Ay</th>
                        <th>Kur</th>
                        <th>Miktar</th>
                        <th>Gram</th>
                        <th>Güncel TL</th>
                        <th>İşlem</th>
                    </tr>
                </thead>
                <tbody id="calculation-table-body">
                </tbody>
                <tfoot>
                    <tr id="generator-row">
                        <td colspan="7">
                            <div class="generator-container">
                                <input type="number" id="payment-count-input" placeholder="Bu alana toplam taksit sayınızı girebilirsiniz" min="1" max="120">
                                <button id="generate-rows-btn" class="toolbar-btn">Otomatik Doldur</button>
                            </div>
                        </td>
                    </tr>
                </tfoot>
            </table>
        </div>

        <!-- Modern Footer with Totals -->
        <div class="footer-container">
            <div class="totals-container" id="totals-container">
                <div class="total-item">
                    <!-- Üst Satır: Harcanan Miktar -->
                    <span class="total-label">Harcanan Miktar:</span>
                    <div id="total-amount" class="total-value">0 ₺</div>
                    <div id="total-gold-amount" class="total-gold-amount">0 gr</div>
                </div>
                <div class="total-item">
                    <!-- Alt Satır: Güncel Değer -->
                    <span class="total-label" id="total-current-value-label">Güncel değer:</span>
                    <span id="total-current-value" class="total-value">0 ₺</span>
                    <div id="value-increase-info" class="value-increase-info">%0 artış</div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modern Modal -->
    <div class="modal-overlay" id="confirmModal">
        <div class="modal-content">
            <div class="modal-title">Tarih Güncelleme</div>
            <div class="modal-message" id="modalMessage"></div>
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-yes" id="modalYes">Evet</button>
                <button class="modal-btn modal-btn-no" id="modalNo">Hayır</button>
            </div>
        </div>
    </div>

    <script src="tablo.js"></script>
</body>
</html>